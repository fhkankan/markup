# Lambda表达式

Java 8(JDK 1.8)中，加入了Lambda表达式。

## 概述

使用实现类

```java
// 创建Runnable接口的实现类
public class RunnableImpl implements Runnable{
    @override
    public void run(){
        System.out.println("多线程任务执行")
    }
}

// 测试类
public class Demo{
    public static void main(String[] args){
        Runnable task = new RunnableImpl();
        new Thread(task).start();
    }
}
```

传统匿名内部类

```java
// 方式一
public class Demo {    
    public static void main(String[] args) {
        // 匿名内部类
        Runnable task = new Runnable() {
            @Override
            public void run() { 
                System.out.println("多线程任务执行!");
            } 
        };
        new Thread(task).start(); // 启动线程 
    }
}

// 方式二
public class Demo {    
    public static void main(String[] args) {
        // 匿名内部类
        new Thread(Runnable() {
            @Override
            public void run() { 
                System.out.println("多线程任务执行!");
            } 
        }).start();
    }
}
```

Lambda

```java
public class Demo02LambdaRunnable {    
    public static void main(String[] args) {
        new Thread(() ‐> System.out.println("多线程任务执行!")).start(); // 启动线程 }
}
```

## 标准格式

格式

```java
(参数类型 参数名称) -> {代码语句}
```

> 说明
>
> 小括号内的语法与传统方法参数列表一致:无参数则留空;多个参数则用逗号分隔。
>
>  -> 是新引入的语法格式，代表指向动作。
>
> 大括号内的语法与传统方法体要求基本一致。

示例：无参无返回

```java
public interface Cook {    
    void makeFood();
}

public class Demo05InvokeCook {   
    public static void main(String[] args) {
        // 使用Lambda【标准格式】调用invokeCook方法
		invokeCook(() ‐> {
            System.out.println("吃饭啦!"); 
        });
    }
       
    private static void invokeCook(Cook cook) {          
        cook.makeFood();
    } 
}
```

示例：有参有返回

```java
public interface Calculator {
    int calc(int a, int b);
}


public class Demo08InvokeCalc {       
    public static void main(String[] args) {
        // 使用Lambda【标准格式】调用invokeCalc方法来计算120+130的结果ß 
        invokeCalc(120, 130, (int a, int b) ‐> {          
            return a + b;
       });
    }

    private static void invokeCalc(int a, int b, Calculator calculator) { 
        int result = calculator.calc(a, b);
        System.out.println("结果是:" + result);
    } 
}
```

## 省略格式

```java
public static void main(String[] args) {             
    invokeCalc(120, 130, (a, b) ‐> a + b);
}
```

省略规则

```
1. 小括号内参数的类型可以省略;
2. 如果小括号内有且仅有一个参，则小括号可以省略;
3. 如果大括号内有且仅有一个语句，则无论是否有返回值，都可以省略大括号、return关键字及语句分号。
```

## 使用前提

Lambda的语法非常简洁，完全没有面向对象复杂的束缚。但是使用时有几个问题需要特别注意:

1. 使用Lambda必须具有接口，且要求接口中有且仅有一个抽象方法。
    无论是JDK内置的 Runnable 、 Comparator 接口还是自定义的接口，只有当接口中的抽象方法存在且唯一 时，才可以使用Lambda。
2. 使用Lambda必须具有上下文推断。 也就是方法的参数或局部变量类型必须为Lambda对应的接口类型，才能使用Lambda作为该接口的实例。

备注:有且仅有一个抽象方法的接口，称为“函数式接口”。