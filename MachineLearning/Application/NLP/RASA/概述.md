# 概述

[官方文档](https://rasa.com/docs/rasa/)

Rasa 是一个开源机器学习框架，用于基于文本和语音的自动化对话。理解消息、保持对话并连接到消息通道和 API。

使用rasa，可以构建在如下频道上构建语境助手

```
Facebook Messenger
Slack
Google Hangouts
Webex Teams
Microsoft Bot Framework
Rocket.Chat
Mattermost
Telegram
Twilio
Your own custom conversational channels
```

或者构建语音助手

```
Alexa Skills
Google Home Actions
```

Rasa 可帮助您构建上下文助手，能够进行多次来回的分层对话。为了让人类与上下文助手进行有意义的交流，助手需要能够使用上下文来构建之前讨论过的事物——Rasa 使您能够构建可以以可扩展方式执行此操作的助手。

##构建助手

### 安装

- 使用源码

```shell
git clone xxx
cd rasa
poetry install
```

## 模块介绍

- core

是一个对话管理平台，用于举行对话和决定下一步做什么。

core包含两个内容，stories和domain。

> Stories

stories可以理解为对话的场景流程，我们需要告诉机器我们的多轮场景是怎么样的，例如，在下文的例子中，我们希望的流程是这样的：用户问好 -> 机器问用户今天过得怎么样 -> 用户反馈情绪 -> 机器根据不同的情绪进行回复，这里其实包含两个流程，一个正面情绪的流程与一个负面情绪的流程，因此，我们也需要编写两个story，接下来我们看下怎么编写story。

| name | desc      |
| ---- | --------- |
| `##` | story标题 |
| `*`  | 意图      |
| `-`  | 动作      |

示例`stories.md`

```
## story_happy

* greet
    - utter_greet
* mood_happy
    - utter_happy


## story_unhappy

* greet2
    - utter_greet
* mood_unhappy
    - utter_unhappy
```

> Domain

domain可以理解为机器的知识库，其中定义了意图，动作，以及对应动作所反馈的内容。

| name            | desc     |
| --------------- | -------- |
| `intents`       | 意图     |
| `actions`       | 动作     |
| `templates	` | 回答模板 |
| `entities	`  | 实体     |
| `slots`         | 词槽     |

示例` domain.yml`

```
intents:
  - greet
  - mood_happy
  - mood_unhappy

actions:
- utter_greet
- utter_happy
- utter_unhappy

templates:
  utter_greet:
  - text: "你好，你今天过的怎么样"

  utter_happy:
  - text: "那很棒棒哦"

  utter_unhappy:
  - text: "咋了，可以告诉我吗"
```

- nlu

用于理解用户消息，包括意图识别和实体识别，它会把用户的输入转换为结构化的数据。

意图可能会出现的文本内容文件`nlu.md`

```
## intent:greet
- 你好
- 上午好
- 下午好
- 早上好
- 晚上好

## intent:mood_happy
- 很好
- 我很好

## intent:mood_unhappy
- 我很难受
- 我心情很差
```

配置文件`nlu_config.yml`

```
language: zh
pipeline: tensorflow_embedding
```



